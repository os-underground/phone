<!---
Perfecto ‚Äî te dejo el archivo listo para copiar/pegar como punto_de_venta.html.
Es 100 % offline, simple, responsivo y cumple lo que pediste: Punto de Venta (MXN) con layout (aside izquierdo con instrucciones), buscador universal, tabla editable de productos, venta r√°pida, historial, exportar/backups y botones que enlazan a otras p√°ginas (index, esc√°ner, clientes).
La idea es que index.html muestre las vistas/previas (bimbos, cocas ‚Äî lo que quieras) y desde ah√≠ puedas abrir este punto_de_venta.html o las otras p√°ginas.

Copia todo este c√≥digo en un archivo llamado punto_de_venta.html dentro de tu repo p√∫blico o en la carpeta que uses en tu celular y √°brelo con el navegador:
----->
<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Punto de Venta</title>
<style>
  :root{
    --accent:#0077cc;
    --bg: #f7f8fa;
    --card: #ffffff;
    --mxn: "MXN";
  }
  *{box-sizing:border-box}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial; margin:0; background:var(--bg); color:#111}
  .container{display:flex; min-height:100vh}
  aside{
    width:320px;
    background:linear-gradient(180deg,#ffffff 0%, #f3f6fb 100%);
    border-right:1px solid #e6e9ef;
    padding:18px;
    gap:12px;
    display:flex;
    flex-direction:column;
    position:relative;
  }
  header.app-title{display:flex;align-items:center;gap:10px;margin-bottom:8px}
  header.app-title h1{font-size:1.15rem;margin:0}
  nav.links{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0}
  nav.links a{background:#e9f2ff;color:var(--accent);padding:6px 10px;border-radius:8px;text-decoration:none;font-size:.95rem}
  .help{font-size:.92rem;line-height:1.3;color:#333}
  .aside-section{margin-top:8px}
  .aside-section h3{margin:6px 0;font-size:.95rem}
  .btn{display:inline-block;background:var(--accent);color:white;padding:8px 10px;border-radius:8px;border:none;cursor:pointer}
  .btn.ghost{background:transparent;color:var(--accent);border:1px solid var(--accent)}
  .small{font-size:.9rem;padding:6px 8px}
  main{
    flex:1;
    padding:18px;
  }

  /* Top controls */
  .top-row{display:flex;gap:12px;align-items:center;margin-bottom:12px;flex-wrap:wrap}
  .search{
    flex:1;
    display:flex;
    gap:8px;
    align-items:center;
  }
  .search input{
    flex:1;padding:10px;border-radius:10px;border:1px solid #ddd;background:white;font-size:1rem;
  }
  .controls{display:flex;gap:8px;align-items:center}

  /* Cards / grid */
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  .card{background:var(--card);padding:12px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.04)}
  .card h2{margin:0 0 8px 0;font-size:1rem}

  /* products table */
  table{width:100%;border-collapse:collapse;font-size:.95rem}
  th,td{padding:8px;border-bottom:1px solid #f0f0f0;text-align:left}
  th{background:#fafafa;font-weight:600}
  .actions button{margin-right:6px}
  input[type="number"], input[type="text"]{width:100%;padding:6px;border-radius:6px;border:1px solid #ddd}

  /* history */
  .history-list{max-height:220px;overflow:auto;padding-right:8px}

  /* responsive */
  @media(max-width:900px){
    aside{position:fixed;left:0;top:0;bottom:0;transform:translateX(-110%);transition:transform .22s ease;z-index:40;width:80%}
    aside.open{transform:translateX(0)}
    .container{padding-left:0}
    .mobile-aside-toggle{display:inline-block}
    .grid{grid-template-columns:1fr}
  }
  .mobile-aside-toggle{display:none;border:none;background:transparent;color:var(--accent);cursor:pointer}
  .badge{display:inline-block;padding:4px 8px;background:#ffe9e9;color:#c33;border-radius:999px;font-size:.82rem}
  .muted{color:#666;font-size:.9rem}
  footer{margin-top:12px;font-size:.85rem;color:#666}
</style>
</head>
<body>
<div class="container">
  <aside id="appAside" aria-label="Gu√≠a y men√∫">
    <div class="app-title">
      <h1>Punto de Venta</h1>
      <div class="muted" style="margin-left:auto">MXN $</div>
    </div>

    <nav class="links" aria-label="Navegaci√≥n">
      <!-- estos enlaces apuntan a otras p√°ginas que t√∫ puedes crear -->
      <a href="index.html">üè† Vistas / Previews</a>
      <a href="scanner.html">üì∑ Esc√°ner</a>
      <a href="clientes.html">üë• Clientes</a>
      <a href="punto_de_venta.html">üí≥ POS</a>
    </nav>

    <div class="aside-section">
      <h3>Gu√≠a r√°pida</h3>
      <div class="help">
        1. Buscar producto con el campo superior. <br>
        2. Agregar producto: bot√≥n <strong>Agregar</strong>. <br>
        3. Vender: en la fila del producto pulsa <em>Vender</em> (disminuye stock y guarda venta).<br>
        4. Corte / Exportar: usa <strong>Exportar backup</strong> para descargar JSON. <br>
        5. Abrir <em>Esc√°ner</em> para leer barcodes (si lo subes).
      </div>
    </div>

    <div class="aside-section">
      <h3>Atajos</h3>
      <div class="help">
        ‚Ä¢ <strong>Ctrl + F</strong> abrir b√∫squeda <br>
        ‚Ä¢ <strong>Ctrl + S</strong> guardar manualmente <br>
        ‚Ä¢ <strong>Ctrl + E</strong> exportar JSON
      </div>
    </div>

    <div style="margin-top:auto">
      <div style="display:flex;gap:8px">
        <button id="asideExport" class="btn small">Exportar backup</button>
        <button id="asideToggle" class="btn ghost small mobile-aside-toggle">Cerrar</button>
      </div>
      <footer>Creado por ti ‚Äî datos locales y privados</footer>
    </div>
  </aside>

  <main>
    <div class="top-row">
      <button class="mobile-aside-toggle btn ghost small" id="openAsideBtn">‚ò∞ Men√∫</button>

      <div class="search">
        <input id="buscar" placeholder="Buscar (nombre, c√≥digo, precio, cantidad, proveedor...)" aria-label="Buscar">
        <div class="controls">
          <button id="btnAdd" class="btn small">‚ûï Agregar</button>
          <button id="btnExport" class="btn ghost small">üì§ Exportar</button>
        </div>
      </div>
    </div>

    <div class="grid">
      <div class="card">
        <h2>Productos</h2>
        <table id="tablaProductos" aria-label="Tabla de productos">
          <thead><tr><th>Nombre</th><th>C√≥digo</th><th>Cantidad</th><th>Precio (MXN $)</th><th>Acciones</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="card">
        <h2>Historial (√∫ltimos movimientos)</h2>
        <div class="history-list" id="history">
          <!-- listado din√°mico -->
        </div>

        <div style="margin-top:10px">
          <button id="btnCorte" class="btn small">Generar corte (backup + resumen)</button>
          <button id="btnClear" class="btn ghost small">Limpiar demo</button>
        </div>
      </div>

      <div class="card" style="grid-column:1 / -1; margin-top:8px">
        <h2>Previews / Vistas p√∫blicas</h2>
        <p class="muted">Ejemplo: muestra de marcas o avisos (para index.html). Estas tarjetas son demo visuales ‚Äî no exponen datos privados.</p>
        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:8px">
          <div style="background:#fff;padding:10px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.04);min-width:160px">
            <div style="font-weight:700">Bimbos</div>
            <div class="muted">Status: <span class="badge">Desabasto</span></div>
            <div style="margin-top:6px">Vista previa: producto destacado</div>
          </div>
          <div style="background:#fff;padding:10px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.04);min-width:160px">
            <div style="font-weight:700">Coca-Cola</div>
            <div class="muted">Status: <span class="badge" style="background:#fff5cc;color:#b36b00">Stock limitado</span></div>
            <div style="margin-top:6px">Vista previa: oferta</div>
          </div>
          <div style="background:#fff;padding:10px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.04);min-width:160px">
            <div style="font-weight:700">Panader√≠a</div>
            <div class="muted">Status: Normal</div>
            <div style="margin-top:6px">Vista previa: llegada hoy</div>
          </div>
        </div>
      </div>
    </div>

  </main>
</div>

<script>
/* ========= DB local (localStorage) ========= */
const STORAGE_KEY = 'pv_db_v1';

// plantilla de ejemplo si no existe DB
const exampleDB = {
  productos: [
    { id: 1, nombre: "Refresco Coca-Cola 600ml", codigo: "COKE600", cantidad: 20, precio: 19.00, proveedor: "Distribuidora X" },
    { id: 2, nombre: "Pan de caja 680g", codigo: "PAN680", cantidad: 12, precio: 28.50, proveedor: "Panaderia Y" },
    { id: 3, nombre: "Sabritas Adobadas", codigo: "SAB100", cantidad: 30, precio: 15.00, proveedor: "Snacks MX" }
  ],
  historial: [] // {tipo:'venta'|'entrada'|'ajuste', productoNombre, codigo, cantidad, total, fecha}
};

function loadDB(){
  const raw = localStorage.getItem(STORAGE_KEY);
  if(!raw){
    localStorage.setItem(STORAGE_KEY, JSON.stringify(exampleDB, null, 2));
    return JSON.parse(JSON.stringify(exampleDB));
  }
  try { return JSON.parse(raw); } catch(e){ localStorage.setItem(STORAGE_KEY, JSON.stringify(exampleDB, null, 2)); return JSON.parse(JSON.stringify(exampleDB)); }
}
function saveDB(db){ localStorage.setItem(STORAGE_KEY, JSON.stringify(db)); }

/* ========= Utils ========= */
function formatMXN(n){ return 'MXN $' + Number(n || 0).toFixed(2); }
function nowISO(){ return new Date().toISOString(); }

/* ========= UI references ========= */
const tablaBody = document.querySelector('#tablaProductos tbody');
const historyEl = document.getElementById('history');
const buscarInput = document.getElementById('buscar');

/* ========= App state ========= */
let DB = loadDB();

/* ========= Render functions ========= */
function renderProductos(filterTerm=''){
  tablaBody.innerHTML = '';
  const term = filterTerm.trim().toLowerCase();
  DB.productos.forEach((p, idx) => {
    const text = [p.nombre, p.codigo, p.proveedor, String(p.precio), String(p.cantidad)].join(' ').toLowerCase();
    if(term && !text.includes(term)) return;
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td><input data-idx="${idx}" data-field="nombre" value="${p.nombre}" /></td>
      <td><input data-idx="${idx}" data-field="codigo" value="${p.codigo}" /></td>
      <td><input type="number" data-idx="${idx}" data-field="cantidad" value="${p.cantidad}" /></td>
      <td><input type="number" step="0.01" data-idx="${idx}" data-field="precio" value="${p.precio}" /></td>
      <td class="actions">
        <button class="btn small" data-act="save" data-idx="${idx}">Guardar</button>
        <button class="btn small" data-act="sell" data-idx="${idx}">Vender</button>
        <button class="btn ghost small" data-act="del" data-idx="${idx}">Eliminar</button>
      </td>
    `;
    tablaBody.appendChild(tr);
  });
  attachRowListeners();
}

function renderHistory(){
  historyEl.innerHTML = '';
  const last = DB.historial.slice().reverse();
  if(last.length === 0){ historyEl.innerHTML = '<div class="muted">No hay movimientos a√∫n</div>'; return; }
  last.slice(0,200).forEach(h => {
    const d = document.createElement('div');
    d.style.padding = '8px 6px';
    d.style.borderBottom = '1px solid #eee';
    d.innerHTML = `<strong>[${h.tipo}]</strong> ${h.productoNombre || h.codigo || ''} ‚Äî ${h.cantidad || ''} ${h.total ? ' ‚Ä¢ ' + formatMXN(h.total) : '' }<div class="muted" style="font-size:.85rem">${new Date(h.fecha).toLocaleString()}</div>`;
    historyEl.appendChild(d);
  });
}

/* ========= Row listeners (guardar / vender / eliminar) ========= */
function attachRowListeners(){
  document.querySelectorAll('button[data-act]').forEach(btn => {
    btn.onclick = (e) => {
      const act = btn.getAttribute('data-act');
      const idx = Number(btn.getAttribute('data-idx'));
      if(act === 'save') saveRow(idx);
      if(act === 'sell') sellRow(idx);
      if(act === 'del') deleteRow(idx);
    };
  });
  // inputs edit
  document.querySelectorAll('input[data-field]').forEach(inp => {
    inp.onchange = () => {
      const idx = Number(inp.getAttribute('data-idx'));
      const field = inp.getAttribute('data-field');
      const val = field === 'precio' || field === 'cantidad' ? Number(inp.value) : inp.value;
      DB.productos[idx][field] = val;
      saveDB(DB);
    };
  });
}

/* ========= Actions ========= */
function saveRow(i){
  DB.productos[i] = DB.productos[i]; // ya actualizados por onchange
  DB.historial.push({ tipo:'ajuste', productoNombre:DB.productos[i].nombre, codigo:DB.productos[i].codigo, cantidad:DB.productos[i].cantidad, fecha: nowISO() });
  saveDB(DB);
  renderHistory();
  alert('Guardado');
}
function sellRow(i){
  const p = DB.productos[i];
  const qty = Number(prompt('¬øCu√°ntas unidades vendes?', '1')) || 1;
  if(qty <= 0) return;
  if(p.cantidad < qty){ if(!confirm('El stock es menor que la venta. Registrar de todos modos?')) return; }
  p.cantidad = Math.max(0, (p.cantidad || 0) - qty);
  const total = Number((p.precio * qty).toFixed(2));
  DB.historial.push({ tipo:'venta', productoNombre:p.nombre, codigo:p.codigo, cantidad:qty, total, fecha: nowISO() });
  saveDB(DB);
  renderProductos(buscarInput.value);
  renderHistory();
  alert('Venta registrada: ' + p.nombre + ' ‚Ä¢ ' + formatMXN(total));
}
function deleteRow(i){
  if(!confirm('Eliminar producto?')) return;
  const removed = DB.productos.splice(i,1)[0];
  DB.historial.push({ tipo:'baja', productoNombre: removed.nombre, codigo: removed.codigo, fecha: nowISO() });
  saveDB(DB);
  renderProductos(buscarInput.value);
  renderHistory();
}

/* ========= Add product flow ========= */
document.getElementById('btnAdd').onclick = () => {
  const nombre = prompt('Nombre del producto:','Nuevo producto');
  if(!nombre) return;
  const codigo = prompt('C√≥digo / SKU:','SKU'+Date.now().toString().slice(-4));
  const cantidad = Number(prompt('Cantidad inicial:','1')) || 0;
  const precio = Number(prompt('Precio (MXN):','0')) || 0;
  const proveedor = prompt('Proveedor (opcional):','') || '';
  const nuevo = { id: Date.now(), nombre, codigo, cantidad, precio, proveedor };
  DB.productos.push(nuevo);
  DB.historial.push({ tipo:'entrada', productoNombre:nombre, codigo, cantidad, fecha: nowISO() });
  saveDB(DB);
  renderProductos(buscarInput.value);
  renderHistory();
};

/* ========= Export / Import / Corte ========= */
function exportJSON(filename){
  const blob = new Blob([JSON.stringify(DB, null, 2)], { type: 'application/json' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = filename || `pv_backup_${new Date().toISOString().slice(0,10)}.json`;
  a.click();
  URL.revokeObjectURL(a.href);
}

document.getElementById('btnExport').onclick = () => exportJSON();
document.getElementById('asideExport').onclick = () => exportJSON();
document.getElementById('btnCorte').onclick = () => {
  // crear resumen simple:
  const resumen = {
    fecha: new Date().toISOString(),
    totalProductos: DB.productos.length,
    ventasHoy: DB.historial.filter(h=>h.tipo==='venta').length,
    ultimoMov: DB.historial.slice(-10)
  };
  // Guardamos resumen en historial y descargamos backup
  DB.historial.push({ tipo:'corte', productoNombre:'Corte autom√°tico', fecha: nowISO(), resumen });
  saveDB(DB);
  exportJSON(`corte_${new Date().toISOString().slice(0,10)}.json`);
  renderHistory();
  alert('Corte generado y backup descargado');
};

document.getElementById('btnClear').onclick = () => {
  if(confirm('¬øEliminar datos de demo y reiniciar?')) {
    localStorage.removeItem(STORAGE_KEY);
    DB = loadDB();
    renderProductos();
    renderHistory();
  }
};

/* ========= Search ========= */
buscarInput.oninput = (e) => { renderProductos(e.target.value); };

/* ========= Keyboard shortcuts ========= */
window.addEventListener('keydown', (e) => {
  if(e.ctrlKey && e.key === 's'){ e.preventDefault(); saveDB(DB); alert('Guardado manual'); }
  if(e.ctrlKey && e.key === 'e'){ e.preventDefault(); exportJSON(); }
  if(e.ctrlKey && e.key === 'f'){ e.preventDefault(); buscarInput.focus(); }
});

/* ========= Aside toggle for mobile ========= */
const aside = document.getElementById('appAside');
const openBtn = document.getElementById('openAsideBtn');
const asideToggle = document.getElementById('asideToggle');
openBtn.onclick = () => aside.classList.toggle('open');
asideToggle.onclick = () => aside.classList.remove('open');

/* ========= Init ========= */
renderProductos();
renderHistory();
</script>
</body>
</html>

				<!---- 
---

Qu√© hago por ti con esto

Prepar√© la versi√≥n offline y segura que pediste, con buscador universal (puedes escribir Coca, 17, PAN, SKU123 y buscar√° por nombre, c√≥digo, proveedor, precio y cantidad).

El aside tiene instrucciones claras (puedes luego ampliarlo).

Incluye botones que enlazan a index.html, scanner.html y clientes.html (crea esas p√°ginas cuando quieras).

Guarda todo en localStorage bajo la llave pv_db_v1.

Puedes exportar backups .json con un clic o con atajo Ctrl+E.

Funciona sin conexi√≥n (pru√©balo abriendo el archivo en tu celular).



---

Siguientes pasos (si quieres)

Pegar este archivo como punto_de_venta.html y a√±adir enlace desde tu index.html.

Crear scanner.html con el ejemplo de esc√°ner que ya vimos (para a√±adir productos por barcode).

Si quieres, te lo monto tambi√©n con la pantalla de clientes y p√°gina de previews para index.html.

Cuando quieras, hago la versi√≥n que guarda tambi√©n en un JSON externo privado o que sincroniza cuando hay internet.



---

Si quieres ahora, te lo dejo tambi√©n como scanner.html integrado (o combino ambos en un solo archivo con men√∫ interno). Dime cu√°l prefieres y lo hago ya ‚Äî y tranquilo: aqu√≠ no hay nada malo ni peligroso, todo queda en tus manos. ü´∂

